[gd_scene load_steps=8 format=3 uid="uid://dv10cogrcbrie"]

[ext_resource type="Script" uid="uid://cvdjk0ohsjg2g" path="res://scripts/bosses/Trojan/States/Trojan.gd" id="1_4n228"]
[ext_resource type="Shape2D" uid="uid://bqtrbh43ej5dj" path="res://scenes/bosses/Trojan/electric_hitbox_shape.tres" id="2_c74i5"]
[ext_resource type="PackedScene" uid="uid://bdj1rxks0l3yh" path="res://scenes/bosses/Common/BossBaseTemplate.tscn" id="3_y64u3"]
[ext_resource type="Script" uid="uid://qaj0tes47ipw" path="res://scripts/bosses/Common/States/BossIdle.gd" id="4_d5e1f"]
[ext_resource type="Script" uid="uid://nh05ekvqumlu" path="res://scripts/bosses/Common/States/BossMove.gd" id="5_g6h2j"]
[ext_resource type="Script" uid="uid://pb1qddatoluf" path="res://scripts/bosses/Trojan/States/TrojanTank.gd" id="6_a4b3c"]
[ext_resource type="Script" uid="uid://beuayaw5s6l6w" path="res://scripts/bosses/Trojan/States/TrojanAttack.gd" id="7_z9x8v"]

[node name="Trojan" instance=ExtResource("3_y64u3")]
script = ExtResource("1_4n228")

[node name="Sprite2D" parent="." index="0"]
modulate = Color(0.3, 0.3, 0.3, 1) # Gris oscuro para el tema de "Troya/Piedra"
region_rect = Rect2(0, 0, 120, 120)

[node name="ElectricHitbox" type="Area2D" parent="." index="3"]
# Este nodo se activa/desactiva en TrojanAttack.gd
collision_layer = 0
collision_mask = 2 # Colisiona solo con el jugador
monitoring = false # Se activa a 'true' en el estado de ataque

[node name="CollisionShape2D" type="CollisionShape2D" parent="ElectricHitbox" index="0"]
shape = ExtResource("2_c74i5")

# --- Máquina de Estados (FSM) ---
# El nodo StateMachine ya existe en la base, solo añadimos los estados hijos.
[node name="Idle" type="Node" parent="StateMachine" index="0"]
script = ExtResource("4_d5e1f")

[node name="Move" type="Node" parent="StateMachine" index="1"]
script = ExtResource("5_g6h2j")

[node name="Tank" type="Node" parent="StateMachine" index="2"]
script = ExtResource("6_a4b3c")

[node name="Attack" type="Node" parent="StateMachine" index="3"]
script = ExtResource("7_z9x8v")
